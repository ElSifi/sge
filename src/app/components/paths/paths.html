<div class="section" ng-cloak>
  <!-- <sg-path-creator-modal></sg-path-creator-modal> -->
  <div class="row">
    <div class="col s12 m7" style="margin-left:2.33%;">
      <div class="card ">
        <md-toolbar style="background-color:#3F1C3E;">
          <div class="md-toolbar-tools" style="display:flex; justify-content:space-between;">
            <h2>
              <span>Paths</span>
            </h2>
            <div style="margin-top: 55px;" class="right-align">
              <a ng-click="pathCtl.showPathCreator($event)"
                class="btn-floating btn-large waves-effect waves-light purple accent-4"
                >
                <i class="material-icons">add</i>
              </a>
            </div>
          </div>
        </md-toolbar>
        <div class="card-content">
          <div ng-repeat="(pathName, pathValue) in pathCtl.paths">
            <div  style="display: flex; flex-flow:row nowrap; justify-content:flex-start;">
                <md-button  class="path-title"
                    style="display: flex; flex-grow: 1; color: #3F1C3E;" ng-click="pathCtl.toggleShowPath(pathName);" href="">
                    <h4  style="text-transform:none; display: flex; flex-grow: 1;">{{pathName}}</h4>
                </md-button>
            </div>
            <div style="display: flex; flex-flow:column nowrap; justify-content:flex-start;" ng-hide="pathCtl.dontShowPaths[pathName]">
                <form name="updateName" style="display: flex; flex-flow:row nowrap;  margin-left: 16px;">
                    <md-input-container style="display:flex; flex-grow:2;">
                      <label>Change Path Name</label>
                      <input  type="text"
                            name="pathName"
                            ng-model="pathCtl[pathName].newName"
                            ng-pattern="/^\/[0-9a-zA-Z\/\.\_\-\{\}]*$/"
                            minlength="3"
                            maxlength="45"
                            required>
                        <div ng-messages="updateName.pathName.$error && updateName.pathName.$dirty" role="alert" >
                            <div ng-message-exp="['required', 'minlength', 'maxlength', 'pattern']">
                              Your Path must be between 3 and 45 characters long and must start with a '/' (forward slash).
                            </div>
                        </div>
                    </md-input-container>
                    <div style="display: flex; flex-flow:row nowrap; justify-content:space-between;">
                        <md-button
                            type="submit"
                            ng-click="pathCtl.updatePathName(pathName, pathCtl[pathName].newName)"
                            style="">
                            Update
                        </md-button>

                        <md-button style=""
                            ng-click="pathCtl.deletePath(pathName)">
                            Delete
                        </md-button>
                    </div>
                </form>

                  <div style="display:flex; flex-direction:row; justify-content:flex-start; align-items: center; margin-left: 16px;">
                    <!-- <div>Operations:</div> -->
                    <md-button
                      sg-operation-colorer="{{operation}}"
                      ng-repeat="operation in pathCtl.operations | orderBy:operation"
                      ng-click="pathCtl.addOperation(pathName, operation)"
                      ng-hide="pathCtl.paths[pathName].hasOwnProperty(operation)"
                      style="margin-right:20px; color:white;">
                      {{operation | uppercase}}
                    </md-button>
                  </div>

                <div class="" layout="column">
                  <ul class="collapsible popout" data-collapsible="accordion" watch>
                      <!-- <li class="" sg-operation sg-operation-name="{{operation}}" sg-operation-object="value" ng-repeat="(operation, value) in pathCtl.paths[pathName]" ng-show="pathCtl.paths[pathName][operation]">
                      </li> -->
                      <sg-operation sg-operation-name="{{operation}}"
                                    sg-operation-object="value"
                                    ng-repeat="(operation, value) in pathCtl.paths[pathName]">
                        <div style="display:flex; flex-direction:row-reverse;">

                        </div>
                      </sg-operation>
                    </ul>
                </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- MODAL FOR PARAM SPECIFICATION -->
  <sg-parameter-editor-modal></sg-parameter-editor-modal>
  <!-- MODAL for RESPONSE UPDATE -->
  <sg-response-editor-modal></sg-response-editor-modal>
</div>
