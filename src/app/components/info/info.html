<div class="section" ng-cloak>
  <div class="row">
    <form name="infoForm" >
      <div class="col s12 m7" style="margin-left:2.33%;">
        <div class="card ">
          <md-toolbar style="background-color:#3F1C3E;">
            <div class="md-toolbar-tools">
              <h2>
                <span>{{ $ctrl.sgBase.info.title + ' API'}}</span>
              </h2>

            </div>
          </md-toolbar>
          <div class="card-content">
            <div style="display:flex flex-flow:column nowrap">
                <p>Start building your Swagger definition by describing some basic info. Watch out some
                  fields are required to enter, but don't worry we will prompt you if anything is missing. For more info on <a href="http://swagger.io/specification/">Swagger Specification</a> or the <a href="https://openapis.org/">Open API</a> initiative.
                </p>
                <div style="display:flex; flex-flow:row nowrap; margin-top: 20px;">
                    <div style="display:flex; flex-flow:column nowrap; margin-right:10px;">
                      <span class="card-title">Info</span>
                      <div style="display:flex; flex-flow:column nowrap">
                          <div style="display:flex; flex-flow:row nowrap;">
                              <md-input-container style="flex-grow:1;">
                                  <label>Title</label>
                                  <input
                                      type="text"
                                      ng-model="$ctrl.sgBase.info.title"
                                      name="apiName"
                                      required>
                                  <div ng-if="infoForm.apiName.$dirty">
                                      <div ng-messages="infoForm.apiName.$error" role="alert" >
                                          <div ng-message="required">
                                              The API name is required.
                                          </div>
                                      </div>
                                  </div>
                              </md-input-container>
                              <md-input-container style="flex-grow:1;">
                                  <label>Version</label>
                                  <input
                                      type="text"
                                      ng-model="$ctrl.sgBase.info.version"
                                      ng-pattern="/^([v]?)([0-9]+)((\.([0-9]+))*)?$/"
                                      name="version"
                                      required>
                                  <div ng-if="infoForm.version.$dirty">
                                      <div  ng-messages="infoForm.version.$error" role="alert" >
                                          <div ng-message-exp="['required','pattern']">
                                              not an allowed format.
                                          </div>
                                      </div>
                                  </div>
                              </md-input-container>
                          </div>
                          <md-input-container style="flex-grow:1;">
                              <label>Description</label>
                              <textarea ng-model="$ctrl.sgBase.info.description"
                              md-maxlength="150"
                              rows="5"
                              md-select-on-focus></textarea>
                          </md-input-container>
                          <div style="display:flex; flex-flow:row nowrap;">
                              <md-input-container style="flex-grow:1;">
                                  <label>Host</label>
                                  <input
                                      type="text"
                                      ng-model="$ctrl.sgBase.host">
                              </md-input-container>
                              <md-input-container style="flex-grow:1;">
                                  <label>Base Path</label>
                                  <input
                                      type="text"
                                      ng-model="$ctrl.sgBase.basePath">
                              </md-input-container>
                          </div>
                      </div>
                    </div>
                    <div style="display:flex; flex-flow:column nowrap; justify-content:space-between; margin-left:10px;">
                        <div style="display:flex; flex-flow:column nowrap">
                            <span class="card-title">Contact</span>
                            <div style="display:flex; flex-flow:row nowrap">
                                <md-input-container style="flex-grow:1;">
                                    <label>Name</label>
                                    <input
                                        type="text"
                                        ng-model="$ctrl.sgBase.info.contact.name">
                                </md-input-container>
                                <md-input-container style="flex-grow:1;">
                                    <label>Url</label>
                                    <input
                                        type="text"
                                        ng-model="$ctrl.sgBase.info.contact.url">
                                </md-input-container>
                                <md-input-container style="flex-grow:1;">
                                    <label>eMail</label>
                                    <input
                                        type="text"
                                        ng-model="$ctrl.sgBase.info.contact.email">
                                </md-input-container>
                            </div>
                        </div>
                        <div style="display:flex; flex-flow:column nowrap">
                            <span class="card-title">License</span>
                            <div style="display:flex; flex-flow:row nowrap">
                                <md-input-container
                                    ng-if="$ctrl.sgBase.info.license.url"
                                    style="flex-grow:1;"
                                    require>
                                    <label>Name</label>
                                    <input
                                        type="text"
                                        name="licenseUrl"
                                        ng-model="$ctrl.sgBase.info.license.name">
                                    <div ng-if="infoForm.licenseUrl.$dirty">
                                        <div ng-messages="infoForm.licenseUrl.$error" role="alert" >
                                            <div ng-message="required">
                                                The license name is required.
                                            </div>
                                        </div>
                                    </div>
                                </md-input-container>
                                <md-input-container
                                    ng-if="!$ctrl.sgBase.info.license.url"
                                    style="flex-grow:1;">
                                    <label>Name</label>
                                    <input
                                        type="text"
                                        ng-model="$ctrl.sgBase.info.license.name">
                                </md-input-container>
                                <md-input-container style="flex-grow:1;">
                                    <label>Url</label>
                                    <input
                                        type="text"
                                        ng-model="$ctrl.sgBase.info.license.url">
                                </md-input-container>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
                <span class="card-title">Types</span>
                <div style="display:flex; flex-direction:column; justify-content:space-between;" >
                  <div style="display:flex; flex-direction:row;" >
                    <sg-dropdown sg-label="Produces" ng-model="$ctrl.produce" sg-choices="$ctrl.types.mime"></sg-dropdown>
                    <button  class="btn-flat waves-effect waves-white white valign" ng-click="$ctrl.addType('produces', $ctrl.produce);">
                      <i class="material-icons">add</i>
                    </button>
                    <button class="btn-flat waves-effect waves-white white " ng-click="$ctrl.removeType('produces', $ctrl.produce);">
                      <i class="material-icons">delete</i>
                    </button>
                  </div>
                  <div ng-if="$ctrl.sgBase.produces.length > 0;" style="display:flex; flex-direction:row;">
                    <div style="display:flex; flex-direction:column; justify-content:flex-start" >
                      <div ng-repeat="produce in $ctrl.sgBase.produces">
                        <span> {{ '\t\t - ' + produce}} </span>
                      </div>
                    </div>
                  </div>
                  <div style="display:flex; flex-direction:row;">
                    <sg-dropdown sg-label="Consumes" ng-model="$ctrl.consume" sg-choices="$ctrl.types.mime"></sg-dropdown>
                    <button class="btn-flat waves-effect waves-white white" ng-click="$ctrl.addType('consumes', $ctrl.consume);">
                      <i class="material-icons">add</i>
                    </button>
                    <button class="btn-flat waves-effect waves-white white " ng-click="$ctrl.removeType('consumes', $ctrl.consume);">
                      <i class="material-icons">delete</i>
                    </button>
                  </div>
                  <div ng-if="$ctrl.sgBase.consumes.length > 0;" style="display:flex; flex-direction:row;">
                    <div style="display:flex; flex-direction:column; justify-content:flex-start" >
                      <div ng-repeat="consume in $ctrl.sgBase.consumes">
                        <span> {{ '\t\t - ' + consume}} </span>
                      </div>
                    </div>
                  </div>
                  <div style="display:flex; flex-direction:row;">
                    <sg-dropdown sg-label="Schemes" ng-model="$ctrl.scheme" sg-choices="$ctrl.types.scheme"></sg-dropdown>
                    <button class="btn-flat waves-effect waves-white white" type="submit" name="action" ng-click="$ctrl.addType('schemes', $ctrl.scheme);">
                      <i class="material-icons" >add</i>
                    </button>
                    <button class="btn-flat waves-effect waves-white white " ng-click="$ctrl.removeType('schemes', $ctrl.scheme);">
                      <i class="material-icons">delete</i>
                    </button>
                  </div>
                  <div ng-if="$ctrl.sgBase.schemes.length > 0;" style="display:flex; flex-direction:row;">
                    <div style="display:flex; flex-direction:column; justify-content:flex-start" >
                      <div ng-repeat="scheme in $ctrl.sgBase.schemes">
                        <span> {{ '\t\t - ' + scheme}} </span>
                      </div>
                    </div>
                  </div>
                </div>
            </div>
          </div>
        </div>
    </form>
  </div>
</div>
