<div id="definition-editor-modal" ng-controller="DefinitionEditorController as definitionEditor" class="modal blue-grey darken-1 modal-fixed-footer" >
  <form name="createDefinition"
        ng-submit=""
        novalidate>
    <div class="modal-content">
      <div class="row">
        <div class="left-align col s12">
          <h4>Edit Definition</h4>]
        </div>
        <div class="input-field col s12 ">
          <input id="definition-name" type="text" ng-model="definitionEditor.tempDefinition.name" required="" aria-required="true">
          <label for="definition-name">Definition Name</label>
        </div>
        <div class="input-field col s12">
          <textarea id="definition-description" ng-model="definitionEditor.tempDefinition.value.description" class="materialize-textarea"></textarea>
          <label for="definition-description">Description</label>
        </div>
        <div class="input-field col s4">
          <input id="definition-ref" type="text" ng-model="definitionEditor.tempDefinition.value.$ref" >
          <label for="definition-ref">$ref</label>
        </div>
        <div class="input-field col s4">
          <input id="definition-type" type="text"
                  ng-model="definitionEditor.tempDefinition.value.type"
                  disabled>
          <label for="definition-type">Type</label>
        </div>
        <div class="input-field col s4">
          <input id="definition-enum" type="text" disabled value="" ng-model="definitionEditor.tempDefinition.value.required">
          <label class="active" for="definition-enum">Required</label>
        </div>
      </div>
      <div class="row">
        <div class="col s12">
          <h5>Properties</h5>
        </div>
        <div class="col s12">
          <form ng-submit="" novalidate>
            <div class="input-field col s6">
              <input id="new-property-name" type="text" ng-model="definitionEditor.newProperty.name" required aria-required="true">
              <label for="new-property-name">Property Name</label>
            </div>
            <div class="input-field col s6">
              <button type="submit"
                ng-if="!definitionEditor.newProperty.name"
                ng-click="definitionEditor.toast('Name cannot be empty')"
                class=" waves-effect waves-green btn disabled">
                <i class="material-icons">add</i>
              </button>
              <button
                ng-if="definitionEditor.newProperty.name"
                ng-class="{'disabled': !definitionEditor.newProperty.name}"
                ng-click="definitionEditor.addProperty(definitionEditor.tempDefinition.name, definitionEditor.newProperty.name);"
                class=" waves-effect waves-green btn">
                <i class="material-icons">add</i>
              </button>
            </div>
          </form>
        </div>

      </div>
      <ul ng-repeat="(property, pValue) in definitionEditor.tempDefinition.value.properties | orderBy:'property'"
          class="collapsible blue-grey darken-2"
          init-collapse
          data-collapsible="accordion">
        <li>
          <div class="collapsible-header blue-grey">
            {{property}}
          </div>
          <div class="collapsible-body ">
            <div class=" valign-wrapper section">
              <div class="input-field col s3 valign">
                <input id="new-property-name" type="text" ng-model="pValue.description" required aria-required="true">
                <label for="new-property-name">Description</label>
              </div>
              <div class="input-field col s2 valign">
                <select class="browser-default" style="background-color: #455a64;" select-value
                        ng-model="pValue.type">
                  <option value="" selected>Choose a Type</option>
                  <option ng-repeat="type in definitionEditor.types"
                          ng-attr-value="{{ type }}"
                          ng-attr-id="{{ type }}">{{ type }}</option>
                </select>
              </div>
              <div class="input-field col s2 valign">
                <select class="browser-default" style="background-color: #455a64;" select-value ng-model="pValue.format">
                  <option value="" selected>Property Format</option>
                  <option ng-repeat="format in definitionEditor.formats"
                          ng-attr-value="{{ format }}"
                          ng-attr-id="{{ format }}">{{ format }}</option>
                </select>
              </div>
              <div class="input-field col s4 valign">
                <input id="property-enum" type="text" placeholder="value,must,be,comma,separated" value=""
                ng-model="pValue.enum">
                <label class="active" for="property-enum">Enum</label>
              </div>
              <div class="input-field col s2 valign valign-wrapper">
                <p unique-checkbox class="valign">
                  <input type="checkbox" id="input" ng-model="definitionEditor[property].required" ng-click="definitionEditor.togglePropertyRequired(property, definitionEditor[property].required)"/>
                  <label id="label" for="label">Required</label>
                </p>
              </div>
            </div>
            <div class="valign-wrapper section" >
              <div class="input-field col s1 offset-s11 valign">
                <button tooltipped
                        class="btn col "
                        data-position="top"
                        data-delay="50"
                        data-tooltip="Delete Property"
                        ng-click="definitionEditor.deleteProperty(property)">
                <i class="material-icons">delete</i>
                </button>
              </div>
              <!--div class="input-field col s1 valign">
                <button tooltipped
                        class="btn col "
                        data-position="top"
                        data-delay="50"
                        data-tooltip="Update Property Data">
                <i class="material-icons">done</i>
                </button>
              </div-->
            </div>
          </div>
        </li>
      </ul>
    </div>
    <div class="modal-footer blue-grey darken-1 ">
      <div>
        <button ng-if="!definitionEditor.tempDefinition.name"
          class=" waves-effect waves-green btn disabled">
        Update Definition
        </button>
        <button class="waves-effect waves-green btn modal-action modal-close"
                close-definition-editor-modal
                ng-if="definitionEditor.tempDefinition.name"
                ng-click="definitionEditor.updateDefinition(definitionEditor.originalDefinition, definitionEditor.tempDefinition)">
          Update Definition
        </button>
      </div>
      <div class="container">
        <button class=" waves-effect waves-green btn modal-action modal-close">
        Cancel
        </button>
      </div>
    </div>
  </form>
</div>
